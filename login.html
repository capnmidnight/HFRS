<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="Consulting, data, integrity, data integry, non-profits, fund raising, stewardship, reporting, software development">
    <meta property="og:type" content="website">
    <meta property="og:url" content="http://www.highlandfrs.com/login.html">
    <meta property="og:site_name" content="Highland FRS">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@HighlandFRS">
        <meta name="web-app-capable" content="yes">
        <meta name="theme-color" content="#002610">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="#002610">
        <meta name="description" content="Highland FRS is a full-service consultancy focusing on assisting fundraising departments of non-profit organizations.">
        <meta property="og:description" content="Highland FRS is a full-service consultancy focusing on assisting fundraising departments of non-profit organizations.">
        <meta name="twitter:description" content="Highland FRS is a full-service consultancy focusing on assisting fundraising departments of non-profit organizations.">
        <meta name="twitter:image" content="http://www.highlandfrs.com/images/logo.jpg">
        <meta property="og:image" content="http://www.highlandfrs.com/images/logo.jpg">
    <link rel="stylesheet" href="/css/style.css">
    <script type="text/javascript" src="/src/requests.js"></script>
    <script type="text/javascript" src="/src/sha512.js"></script>
  </head>
  <body>
    <header><a id="mainLogoWrapper" href="/index.html"><img id="mainLogo" src="/images/logo.svg" alt="logo" title="Highland FRS logo"></a>
      <nav>
        <ul>
          <li><a href="/#services">services</a></li>
          <li><a href="/#about">about</a></li>
          <li><a href="/#contact">contact</a></li>
          <li><a href="/#customers">customers</a></li>
          <li><a href="/#news">news</a></li>
          <li><a href="/downloads.html">downloads</a></li>
        </ul>
      </nav>
    </header>
    <section id="content">
      <article id="about">
        <div>
          <label for="username">Name:</label>
          <input type="text" id="name">
        </div>
        <div>
          <label for="password">Password:</label>
          <input type="password" id="password">
        </div>
        <div id="badAuth" style="display:none">Incorrect user name or password. Please try again.</div>
        <button id="login" type="button" class="primary button">Login</button>
      </article>
      <script type="text/javascript">
        var btn = document.querySelector("#login"),
          user = document.querySelector("#name"),
          pass = document.querySelector("#password"),
          bad = document.querySelector("#badAuth");
        
        function hideBadAuthMsg(){
          bad.style.display = "none";
        }
          
        user.addEventListener("focus", hideBadAuthMsg, false);
        pass.addEventListener("focus", hideBadAuthMsg, false);
        btn.addEventListener("click", function(){
          hideBadAuthMsg();
          sendObjectGetText("/salt", { data: { name: user.value}})
          .then(function(salt){
            return sendObjectGetText("/hash", { data: {
              name: user.value,
              hash: CryptoJS.SHA512(salt + pass.value).toString()
            }});
          }).then((txt)=>{
            var redir = location.search.match(/^\?return=(.+)$/);
            location = redir && redir[1] || "/index.html";
          }).catch((err)=>{
            console.error(err);
            bad.style.display = "block";
            throw err;
          });
        });
      </script>
    </section>
    <footer>
      Copyright &copy; Highland FRS LLC, 2010 - 2016.
      The Raiser's Edge&trade; is a registered trademark of Blackbaud&reg;, Inc.
      Crystal Reports&trade; is a registered trademark of SAP SE&reg;.
      LinkedIn&reg; is a registered trademark of LinkedIn Corporation.
      <div id="admin"><a id="login" href="/login">login</a><a id="logout" href="/logout">logout</a> - <a id="contacts" href="/contacts">contacts</a>
        <script type="text/javascript">
          window.addEventListener("load", function(){
            var login = document.querySelector("#login"),
              logout = document.querySelector("#logout"),
              authed = /\btoken\b/.test(document.cookie);
            login.style.display = authed ? "none" : "";
            logout.style.display = authed ? "" : "none";
          });
        </script>
      </div>
    </footer>
  </body>
</html>