function XHR(a,b,c,d){return new Promise(function(e,f){d=d||{},d.headers=d.headers||{},d.headers.Accept=d.headers.Accept||typeMappings[b]||b;var g=new XMLHttpRequest;g.onerror=function(a){f(new Error("Request error: "+a.message))},g.onabort=function(a){f(new Error("Request abort: "+a.message))},g.onload=function(){g.status<400?e(g.response):f(g)},g.open(a,c),b&&(g.responseType=b),g.onprogress=d.progress;for(var h in d.headers)g.setRequestHeader(h,d.headers[h]);g.withCredentials=!!d.withCredentials,d.data?g.send(d.data):g.send()})}function post(a,b,c){return XHR("POST",a,b,c)}function sendObject(a,b,c){return c=c||{},c.headers=c.headers||{},c.headers["content-type"]=c.headers["content-type"]||"application/json;charset=UTF-8","string"!=typeof c.data&&(c.data=JSON.stringify(c.data)),post(a,b,c)}function sendObjectGetText(a,b){return sendObject("text",a,b)}function sendObjectGetObject(a,b){return sendObject("json",a,b)}function get(a,b,c){return XHR("GET",a||"text",b,c)}function getText(a,b){return get("text",a,b)}function getHTML(a,b){return get("document",a,b)}function getObject(a,b){return get("json",a,b)}function getBuffer(a,b){return get("arraybuffer",a,b)}var typeMappings={document:"text/html",json:"application/json",text:"text/plain"};