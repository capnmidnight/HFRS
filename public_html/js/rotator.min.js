
(function(){var c=500;function b(g){var q=[],o=g.children.length,f=0,p=[],h=document.createElement("div"),v=0,e=g.dataset.timeout||3000,u=e/2;for(var k=0;k<o;++k){q[k]=g.children[k];q[k].style.position="absolute";q[k].style.marginTop=0;q[k].style.marginBottom=0;p[k]=document.createElement("span");p[k].innerHTML="●";p[k].className="pip";p[k].onclick=l.bind(this,k);h.appendChild(p[k]);if(k>0){m(k)}else{s(k)}}h.style.margin=0;h.style.padding=0;g.insertBefore(h,q[0]);function d(){var t=0;for(var n=0;n<q.length;++n){t=Math.max(t,q[n].clientHeight)}g.style.position="relative";g.style.height=(t+h.clientHeight)+"px"}d();window.addEventListener("resize",d,false);function m(n){q[n].style.opacity=0;p[n].style.cursor="pointer";p[n].style.opacity=0.25}function s(n){q[n].style.opacity=1;p[n].style.cursor="default";p[n].style.opacity=1}function l(n){m(f);v=0;f=n;s(f)}function r(){var n=g.getBoundingClientRect(),i=n.bottom>=0&&n.top<=window.innerHeight;return i}var j=0;this.update=function(n){var i=n-j;j=n;v+=i;if(r()){if(v>=e){l((f+1)%o)}q[f].style.opacity=Math.min(1,(u-Math.abs(v-u))/c)}}}window.addEventListener("load",function a(){var d=Array.prototype.slice.call(document.querySelectorAll(".rotator"));for(var e=0;e<d.length;++e){d[e]=new b(d[e])}function f(h){requestAnimationFrame(f);for(var g=0;g<d.length;++g){d[g].update(h)}}requestAnimationFrame(f)},false)})();